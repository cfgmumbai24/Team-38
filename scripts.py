import requests
import csv
burl = "https://youtube-transcriptor.p.rapidapi.com/transcript"
headers = {
	"x-rapidapi-key": "",
	"x-rapidapi-host": "youtube-transcriptor.p.rapidapi.com"
}

urls=['https://www.youtube.com/watch?v=oLmMV1JGZK8','https://www.youtube.com/watch?v=ui3Ef9rrIsQ','https://www.youtube.com/watch?v=exH_MFn8g_4','https://www.youtube.com/watch?v=eDN4nPNH7IM','https://www.youtube.com/watch?v=k-H51-8ZBNU','https://www.youtube.com/watch?v=3WLEApwNlcc','https://www.youtube.com/watch?v=Ly8uG24In7M','https://www.youtube.com/watch?v=_rsuVnatLRQ','https://www.youtube.com/watch?v=oJZ4uchUDcQ','https://www.youtube.com/watch?v=2VGLf7uMc8A','https://www.youtube.com/watch?v=r5kSIQ7mrqs','https://www.youtube.com/watch?v=6ivI4gTjwfU','https://www.youtube.com/watch?v=GwNlGEKRtCI']
#urls=['https://www.youtube.com/watch?v=oLmMV1JGZK8','https://www.youtube.com/watch?v=ui3Ef9rrIsQ']
def get_video_id(url):
    return url.split("v=")[1]

def transcribe(url):
    vid=get_video_id(url)
    print
    if url=='https://www.youtube.com/watch?v=oLmMV1JGZK8':
        data= [{"title":"All About Money","description":"The video explains how the concept and usage of money has changed over time, moving from a barter system to card to invisible electronic money today. The video has following things covered - \n1. Evolution of money and its forms\n2. Importance of money \n3. Barter system and its challenges \n4. Emergence of new forms of money and their kind\n5. CTA - learn about various new forms of money such as debit card and UPI to make life simpler \n\nTo know more about personal finance management, visit - \n1. Multiply Website \n\nTo receive regular byte sized updates and tips on personal finance management \n1. Subscribe on WhatsApp \n\nYou can also follow us on social media channels to receive regular updates \n1. Instagram \n2. Facebook \n\n#basicsofmoney #financialmanagement #financialeducation #financialplanning #emoney","availableLangs":["en","en-IN"],"lengthInSeconds":"199","thumbnails":[{"url":"https://i.ytimg.com/vi_webp/oLmMV1JGZK8/default.webp","width":120,"height":90},{"url":"https://i.ytimg.com/vi_webp/oLmMV1JGZK8/mqdefault.webp","width":320,"height":180},{"url":"https://i.ytimg.com/vi_webp/oLmMV1JGZK8/hqdefault.webp","width":480,"height":360},{"url":"https://i.ytimg.com/vi_webp/oLmMV1JGZK8/sddefault.webp","width":640,"height":480},{"url":"https://i.ytimg.com/vi/oLmMV1JGZK8/hq720.jpg?sqp=-oaymwEcCK4FEIIDSEbyq4qpAw4IARUAAIhCGAFwAcABBg==&rs=AOn4CLALdMoZ1ILvcWXVYZWG0eGLGUCw_g","width":686,"height":386}],"transcription":[{"subtitle":"[Music]","start":0.76,"dur":5.3},{"subtitle":"have you ever wondered why we use money","start":2,"dur":7},{"subtitle":"how it originated and why it keeps","start":6.06,"dur":4.56},{"subtitle":"evolving","start":9,"dur":3.96},{"subtitle":"money is needed for things we need to","start":10.62,"dur":6.9},{"subtitle":"survive such as food clothing Education","start":12.96,"dur":7.44},{"subtitle":"Health Services and more","start":17.52,"dur":5.759},{"subtitle":"but what did people do when there was no","start":20.4,"dur":4.26},{"subtitle":"money","start":23.279,"dur":3.961},{"subtitle":"there was a time when people used to","start":24.66,"dur":5.52},{"subtitle":"exchange one thing for another","start":27.24,"dur":5.58},{"subtitle":"it is called the Bata system like","start":30.18,"dur":4.62},{"subtitle":"someone would exchange rice for milk","start":32.82,"dur":5.759},{"subtitle":"clothing for shoes Etc","start":34.8,"dur":6.54},{"subtitle":"but this system had its own challenges","start":38.579,"dur":6.241},{"subtitle":"it was difficult to find the person who","start":41.34,"dur":5.94},{"subtitle":"would be ready to exchange goods","start":44.82,"dur":4.86},{"subtitle":"deciding the value of different items","start":47.28,"dur":4.02},{"subtitle":"was difficult","start":49.68,"dur":5.059},{"subtitle":"is 1 kg wheat equal to a pair of shoes","start":51.3,"dur":6.54},{"subtitle":"some items were too heavy to carry such","start":54.739,"dur":6.281},{"subtitle":"as animals food wood rot and somewhere","start":57.84,"dur":6.62},{"subtitle":"more expensive to be exchanged for Less","start":61.02,"dur":6.84},{"subtitle":"to overcome these challenges the bada","start":64.46,"dur":5.44},{"subtitle":"system was then replaced by different","start":67.86,"dur":4.92},{"subtitle":"types of currency across the world","start":69.9,"dur":6.48},{"subtitle":"some used seashells some made coins out","start":72.78,"dur":6.6},{"subtitle":"of metals such as gold and silver that","start":76.38,"dur":6.66},{"subtitle":"had weight and value mentioned on them","start":79.38,"dur":6.96},{"subtitle":"today the most common form of money is","start":83.04,"dur":5.88},{"subtitle":"band notes and coins which have standard","start":86.34,"dur":3.66},{"subtitle":"values","start":88.92,"dur":4.5},{"subtitle":"now we can buy and sell things without","start":90,"dur":5.34},{"subtitle":"having to wait for an appropriate","start":93.42,"dur":3.48},{"subtitle":"bargain","start":95.34,"dur":5.099},{"subtitle":"but it has its own challenges","start":96.9,"dur":7.32},{"subtitle":"fear of loss or theft unavailability of","start":100.439,"dur":6.54},{"subtitle":"change unavailability of huge sum of","start":104.22,"dur":5.52},{"subtitle":"cash electronic money came into","start":106.979,"dur":5.581},{"subtitle":"existence with cards","start":109.74,"dur":5.699},{"subtitle":"such as debit and credit cards online","start":112.56,"dur":5.64},{"subtitle":"currency and wallets so that we can","start":115.439,"dur":4.881},{"subtitle":"carry money digitally","start":118.2,"dur":4.919},{"subtitle":"this means that we no longer need to","start":120.32,"dur":5.64},{"subtitle":"carry cash but just a phone","start":123.119,"dur":5.881},{"subtitle":"the phone number or these cards are","start":125.96,"dur":5.38},{"subtitle":"connected to your bank accounts and help","start":129,"dur":4.13},{"subtitle":"in doing transactions","start":131.34,"dur":4.5},{"subtitle":"[Music]","start":133.13,"dur":5.59},{"subtitle":"today is invisible and people do","start":135.84,"dur":4.92},{"subtitle":"cashless exchange via online","start":138.72,"dur":3.13},{"subtitle":"transactions","start":140.76,"dur":4.86},{"subtitle":"[Music]","start":141.85,"dur":7.31},{"subtitle":"small card that has money equivalent to","start":145.62,"dur":6},{"subtitle":"your savings account and can be used to","start":149.16,"dur":4.26},{"subtitle":"make payments","start":151.62,"dur":4.74},{"subtitle":"credit card it is also a card that","start":153.42,"dur":5.28},{"subtitle":"allows you to borrow money from the bank","start":156.36,"dur":6},{"subtitle":"on the go it allows quick buy now and","start":158.7,"dur":6.84},{"subtitle":"pay later facility e-wallets it is a","start":162.36,"dur":5.34},{"subtitle":"facility that is available on your","start":165.54,"dur":5.04},{"subtitle":"phones and allows us to save money in","start":167.7,"dur":5.64},{"subtitle":"phone and make payments or receive money","start":170.58,"dur":4.2},{"subtitle":"through it","start":173.34,"dur":4.5},{"subtitle":"interesting right physical form of money","start":174.78,"dur":6.3},{"subtitle":"keeps evolving and it is on us to keep","start":177.84,"dur":5.399},{"subtitle":"up with the pace to make our lives","start":181.08,"dur":4.379},{"subtitle":"easier and better","start":183.239,"dur":4.321},{"subtitle":"do you want to learn more about money","start":185.459,"dur":5.06},{"subtitle":"visit","start":187.56,"dur":2.959},{"subtitle":"www.multiply.org dot in multiply is a","start":191,"dur":5.8},{"subtitle":"non-profit initiative of Creator","start":194.459,"dur":3.431},{"subtitle":"Foundation","start":196.8,"dur":3.66},{"subtitle":"[Music]","start":197.89,"dur":2.57}],"transcriptionAsText":"[Music] have you ever wondered why we use money how it originated and why it keeps evolving money is needed for things we need to survive such as food clothing Education Health Services and more but what did people do when there was no money there was a time when people used to exchange one thing for another it is called the Bata system like someone would exchange rice for milk clothing for shoes Etc but this system had its own challenges it was difficult to find the person who would be ready to exchange goods deciding the value of different items was difficult is 1 kg wheat equal to a pair of shoes some items were too heavy to carry such as animals food wood rot and somewhere more expensive to be exchanged for Less to overcome these challenges the bada system was then replaced by different types of currency across the world some used seashells some made coins out of metals such as gold and silver that had weight and value mentioned on them today the most common form of money is band notes and coins which have standard values now we can buy and sell things without having to wait for an appropriate bargain but it has its own challenges fear of loss or theft unavailability of change unavailability of huge sum of cash electronic money came into existence with cards such as debit and credit cards online currency and wallets so that we can carry money digitally this means that we no longer need to carry cash but just a phone the phone number or these cards are connected to your bank accounts and help in doing transactions [Music] today is invisible and people do cashless exchange via online transactions [Music] small card that has money equivalent to your savings account and can be used to make payments credit card it is also a card that allows you to borrow money from the bank on the go it allows quick buy now and pay later facility e-wallets it is a facility that is available on your phones and allows us to save money in phone and make payments or receive money through it interesting right physical form of money keeps evolving and it is on us to keep up with the pace to make our lives easier and better do you want to learn more about money visit www.multiply.org dot in multiply is a non-profit initiative of Creator Foundation [Music]"}]
        return data[0]['title'],data[0]['description'],data[0]['transcriptionAsText']
    else:
        print(vid)
        querystring = {"video_id":vid,"lang":"en"}
        data=requests.get(burl, headers=headers, params=querystring)
        data=data.json()[0]
        return data['title'],data['description'],data['transcriptionAsText']

if __name__ == '__main__':
    filename = 'videos.csv'
# Writing to csv file
    with open(filename, 'w', newline='', encoding='utf-8') as csvfile:
        writer = csv.DictWriter(csvfile, fieldnames=['title', 'description', 'transcriptionAsText'])
        writer.writeheader()
        # Creating a csv dict writer object
        for u in urls:
            print(u)
            title,desc,transcription=transcribe(u)
            writer.writerows([{'title': title, 'description': desc, 'transcriptionAsText': transcription}])


    